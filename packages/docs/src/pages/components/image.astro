---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  SizesDemo,
  PreviewDemo,
  FallbackDemo,
} from '../../components/ImageDemo';
import ImageDemoSource from '../../components/ImageDemo.tsx?raw';

const api = [
  { property: 'src', description: 'Image source URL', type: 'string' },
  { property: 'alt', description: 'Alternative text for the image', type: 'string', default: "''" },
  { property: 'width', description: 'Image width', type: 'number | string' },
  { property: 'height', description: 'Image height', type: 'number | string' },
  { property: 'preview', description: 'Enable click to preview image in lightbox', type: 'boolean', default: 'true' },
  { property: 'fallback', description: 'Fallback image URL when source fails to load', type: 'string' },
  { property: 'placeholder', description: 'Placeholder content shown while loading', type: 'React.ReactNode' },
  { property: 'onLoad', description: 'Callback when image loads successfully', type: '() => void' },
  { property: 'onError', description: 'Callback when image fails to load', type: '() => void' },
  { property: 'className', description: 'Additional CSS classes', type: 'string' },
  { property: 'style', description: 'Inline styles', type: 'React.CSSProperties' },
];
---

<ComponentLayout
  name="Image"
  description="Display images with preview and fallback support."
  api={api}
>
  <Example title="Basic Image" description="Simple image display with src and alt props." source={ImageDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Different Sizes" description="Images with various dimensions." source={ImageDemoSource} fn="SizesDemo">
    <SizesDemo client:load slot="demo" />
  </Example>

  <Example title="Image Preview" description="Click image to preview in full size." source={ImageDemoSource} fn="PreviewDemo">
    <PreviewDemo client:load slot="demo" />
  </Example>

  <Example title="Fallback Image" description="Display fallback image when source fails to load." source={ImageDemoSource} fn="FallbackDemo">
    <FallbackDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Always provide meaningful <code class="bg-base-content/20 px-1 rounded">alt</code> text for screen readers</li>
      <li>Use fallback images to ensure content is always visible</li>
      <li>Preview is keyboard accessible: press Enter or Space to open, Escape to close</li>
      <li>Previewable images have <code class="bg-base-content/20 px-1 rounded">role="button"</code> with appropriate aria-label</li>
      <li>Preview modal has <code class="bg-base-content/20 px-1 rounded">role="dialog"</code> and <code class="bg-base-content/20 px-1 rounded">aria-modal="true"</code></li>
      <li>Error state includes aria-label describing the failure</li>
    </ul>
  </section>
</ComponentLayout>
